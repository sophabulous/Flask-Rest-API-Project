{% extends "layout.html" %}
{% block content %}

{% include 'navbar.html' %}

<div class="container">
    <div class="row">
        {% if p_by_brand %}
            {% for p in p_by_brand %}
                <div class="col-md-3 mt-4">
                    <div class="card">
                        <img src="{{url_for('static', filename='images/' + p.image_1)}}" class="card-img-top"
                             alt="{{p.name}}" height="200" width="200" style="object-fit: contain;">
                        <div class="card-body">
                            {% if p.discount > 0 %}
                            <h5 style="text-shadow: 1px 2px 2px #000; color: #f00; transform: rotate(-15deg); position: absolute; top: 23%; left: 25%; font-weight: 600;"> Discount {{p.discount}}%</h5>
                            {% endif %}
                          <h5 class="text-center">{{p.name}}</h5>
                          <p class="text-center">Price ${{p.price}}</p>
                        </div>
                        <div class="card-footer">
                            <a href="{{url_for('details_page', id=p.id)}}" class="float-left btn btn-sm btn-primary">
                                Details</a>
                            <form action="{{url_for('add_to_cart')}}" method="POST">
                                <input type="hidden" name="product_id" value="{{p.id}}">
                                <input type="hidden" name="quantity" value="1" min="1" max="20">
                                <button type="submit" class="btn btn-sm btn-warning float-right">Add to Cart</button>
                              </form>
                        </div>
                    </div>
                </div>
            {% endfor %}

            {% elif prod_by_cat %}
            {% for p in prod_by_cat %}
                <div class="col-md-3 mt-4">
                    <div class="card">
                        <img src="{{url_for('static', filename='images/' + p.image_1)}}" class="card-img-top"
                             alt="{{p.name}}" height="200" width="200" style="object-fit: contain;" >
                        <div class="card-body">
                            {% if p.discount > 0 %}
                            <h5 style="text-shadow: 1px 2px 2px #000; color: #f00; transform: rotate(-15deg); position: absolute; top: 23%; left: 25%; font-weight: 600;"> Discount {{p.discount}}%</h5>
                            {% endif %}
                          <h5 class="text-center">{{p.name}}</h5>
                          <p class="text-center">Price ${{p.price}}</p>
                        </div>
                        <div class="card-footer">
                            <a href="{{url_for('details_page', id=p.id)}}" class="float-left btn btn-sm btn-primary">
                                Details</a>
                            <form action="{{url_for('add_to_cart')}}" method="POST">
                                <input type="hidden" name="product_id" value="{{p.id}}">
                                <input type="hidden" name="quantity" value="1" min="1" max="20">
                                <button type="submit" class="btn btn-sm btn-warning float-right">Add to Cart</button>
                              </form>
                        </div>
                    </div>
                </div>
            {% endfor %}

        {% else %}
            {% for product in products %}
                <div class="col-md-3 mt-4">
                    <div class="card">
                        <img src="{{url_for('static', filename='images/' + product.image_1)}}"
                        class="card-img-top" alt="{{product.name}}" height="200" width="200" style="object-fit: contain;">
                        <div class="card-body">
                            {% if product.discount > 0 %}
                                <h5 style="text-shadow: 1px 2px 2px #000; color: #f00; transform: rotate(-15deg); position: absolute; top: 23%; left: 25%; font-weight: 600;"> Discount {{product.discount}} %</h5>
                            {% endif %}
                            <h5 class="text-center">{{product.name}}</h5>
                            <p class="text-center">Price ${{product.price}}</p>
                        </div>
                        <div class="card-footer">
                            <a href="{{url_for('details_page',id=product.id)}}" class="float-left btn btn-sm btn-primary">
                                Details</a>
                            <form action="{{url_for('add_to_cart')}}" method="POST">
                                <input type="hidden" name="product_id" value="{{product.id}}">
                                <input type="hidden" name="quantity" value="1" min="1" max="20">
                                <button type="submit" class="btn btn-sm btn-warning float-right">Add to Cart</button>
                          </form>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    </div>
</div>


{% endblock content %}